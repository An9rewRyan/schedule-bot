# üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ Mini App —Å HTTPS

–≠—Ç–æ—Ç –Ω–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—É—Å–∫ Mini App —Å HTTPS –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —á–µ—Ä–µ–∑ ngrok.

## üìã –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

1. **–ó–∞–ø—É—Å–∫–∞–µ—Ç ngrok** –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ `ngrok.yml`
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç CORS** –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ backend
3. **–û–±–Ω–æ–≤–ª—è–µ—Ç URL** –≤ frontend –∏ Telegram –±–æ—Ç–µ
4. **–ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã** (backend, frontend, bot)
5. **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ URL** –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
python start_miniapp_https.py
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
python stop_miniapp.py
```

## üìÅ –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### `ngrok.yml`
```yaml
version: "2"
authtoken: YOUR_AUTHTOKEN

tunnels:
  frontend:
    proto: http
    addr: 3000
    
  backend:
    proto: http
    addr: 8000
```

## üéØ –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

1. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤**
   - –£–±–∏–≤–∞–µ—Ç –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã ngrok
   - –û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –ø–æ—Ä—Ç—ã 8000, 3000, 4040

2. **–ó–∞–ø—É—Å–∫ ngrok**
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç—É–Ω–Ω–µ–ª–∏ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - –ü–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤—ã–µ HTTPS URL

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π**
   - `backend/src/main.py` - –æ–±–Ω–æ–≤–ª—è–µ—Ç CORS origins
   - `frontend/app.js` - –æ–±–Ω–æ–≤–ª—è–µ—Ç backend URL
   - `tg_bot/handlers/start.py` - –æ–±–Ω–æ–≤–ª—è–µ—Ç Mini App URL

4. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤**
   - Backend –Ω–∞ –ø–æ—Ä—Ç—É 8000
   - Frontend –Ω–∞ –ø–æ—Ä—Ç—É 3000  
   - Telegram –±–æ—Ç

## üì± –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Telegram

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–∫–∞–∑–∞–Ω–Ω—ã–π URL –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Mini App –≤ BotFather:

```
Mini App URL: https://XXXXXX.ngrok-free.app
```

## üõ† –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ ngrok:
```bash
curl http://localhost:4040/api/tunnels | python -m json.tool
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ backend:
```bash
curl http://localhost:8000/health
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ frontend:
```bash
curl http://localhost:3000
```

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å –Ω–æ–≤—ã–º–∏ ngrok URL
- ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç frontend –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç Telegram bot –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ URL

## üö® –û—Å—Ç–∞–Ω–æ–≤–∫–∞

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:
- –ù–∞–∂–º–∏—Ç–µ `Ctrl+C` –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å –∑–∞–ø—É—â–µ–Ω–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º
- –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `python stop_miniapp.py`

## üìù –õ–æ–≥–∏

–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `logs/`:

### –§–∞–π–ª—ã –ª–æ–≥–æ–≤:
- `miniapp_starter.log` - –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ –∑–∞–ø—É—Å–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- `ngrok.log` - –ª–æ–≥–∏ ngrok —Ç—É–Ω–Ω–µ–ª–µ–π
- `backend.log` - –ª–æ–≥–∏ backend —Å–µ—Ä–≤–µ—Ä–∞ (FastAPI)
- `frontend.log` - –ª–æ–≥–∏ frontend —Å–µ—Ä–≤–µ—Ä–∞
- `telegram_bot.log` - –ª–æ–≥–∏ Telegram –±–æ—Ç–∞

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ª–æ–≥–æ–≤
python view_logs.py

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
python view_logs.py -s backend
python view_logs.py -s frontend
python view_logs.py -s ngrok
python view_logs.py -s bot
python view_logs.py -s main

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
python view_logs.py -f backend.log
python view_logs.py -f telegram_bot.log

# –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å—Ç—Ä–æ–∫
python view_logs.py -t 100

# –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤
python view_logs.py -l
```

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
python start_miniapp_https.py

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ backend
python view_logs.py -f backend.log

# –í —Ç—Ä–µ—Ç—å–µ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–æ—Ç–∞
python view_logs.py -f telegram_bot.log
```

## ‚ö†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.7+
- ngrok —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`pip install -r requirements.txt`)
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL 